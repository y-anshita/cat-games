<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸˆ çŒ«ã®ç¥çµŒè¡°å¼± (ã‚¿ã‚¤ãƒ ã¤ã)</title>
    <style>
        /* CSS (è¦‹ãŸç›®ã¯ã»ã¼åŒã˜ã§ã™) */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #e0f2f1;
            color: #004d40;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            user-select: none;
        }

        h1 {
            color: #00796b;
        }

        #game-board {
            display: grid;
            grid-template-columns: repeat(4, 90px); 
            grid-template-rows: repeat(3, 90px);
            gap: 10px;
            margin-bottom: 20px;
            /* æœ€åˆã¯ã‚«ãƒ¼ãƒ‰ãŒãªã„ã®ã§é«˜ã•ãŒ0ã«ãªã‚‹ã®ã‚’é˜²ã */
            min-height: 290px; /* 3è¡Œ x 90px + 2 x 10px gap */
        }

        .card {
            width: 90px;
            height: 90px;
            background-color: #ffffff;
            border: 3px solid #4db6ac;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .card .front { display: none; }
        .card .back { display: block; font-size: 60px; color: #80cbc4; }
        .card.flipped { background-color: #e0f7fa; transform: scale(1.05); }
        .card.flipped .front { display: block; }
        .card.flipped .back { display: none; }
        .card.matched { background-color: #c8e6c9; border-color: #66bb6a; cursor: not-allowed; opacity: 0.7; }

        /* UIï¼ˆçµæœè¡¨ç¤ºã¨ãƒœã‚¿ãƒ³ï¼‰ */
        #ui-container {
            text-align: center;
        }

        /* --- ã“ã“ã‹ã‚‰è¿½åŠ ãƒ»å¤‰æ›´ --- */
        #timer {
            font-size: 22px;
            font-weight: bold;
            color: #00796b; /* ã‚¿ã‚¤ãƒãƒ¼ã®è‰² */
            margin-bottom: 10px;
            height: 30px; /* å ´æ‰€ã‚’ç¢ºä¿ */
        }
        /* --- ã“ã“ã¾ã§è¿½åŠ ãƒ»å¤‰æ›´ --- */

        #result {
            font-size: 24px;
            font-weight: bold;
            color: #d81b60;
            height: 40px; /* å ´æ‰€ã‚’ç¢ºä¿ */
        }

        #reset-button {
            font-size: 18px;
            padding: 10px 20px;
            background-color: #ff8a65;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #reset-button:hover {
            background-color: #ff7043;
        }

    </style>
</head>
<body>

    <h1>ğŸˆ çŒ«ã®ç¥çµŒè¡°å¼± ğŸˆ</h1>

    <div id="game-board">
        </div>

    <div id="ui-container">
        <div id="timer"></div>
        <div id="result"></div>
        <button id="reset-button">ã‚¹ã‚¿ãƒ¼ãƒˆ / ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

    <script>
        // JavaScript (ã‚¿ã‚¤ãƒ è¨ˆæ¸¬æ©Ÿèƒ½ã‚’è¿½åŠ )

        const gameBoard = document.getElementById('game-board');
        const resultDisplay = document.getElementById('result');
        const resetButton = document.getElementById('reset-button');
        // â–¼ ã‚¿ã‚¤ãƒãƒ¼ã®è¦ç´ ã‚’å–å¾— â–¼
        const timerDisplay = document.getElementById('timer');

        const cats = ['ğŸ±', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½'];
        let cardArray = [...cats, ...cats];

        let firstCard = null;
        let secondCard = null;
        let lockBoard = false;
        let matchedPairs = 0;

        // â–¼ ã‚¿ã‚¤ãƒãƒ¼ç”¨ã®å¤‰æ•°ã‚’è¿½åŠ  â–¼
        let secondsElapsed = 0; // çµŒéç§’æ•°
        let timerInterval = null; // ã‚¿ã‚¤ãƒãƒ¼ã®ID (setIntervalã‚’æ­¢ã‚ã‚‹ãŸã‚)

        // --- ã‚«ãƒ¼ãƒ‰ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹é–¢æ•° ---
        function shuffle(array) {
            array.sort(() => Math.random() - 0.5);
        }

        // --- ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹é–¢æ•° (ã‚¹ã‚¿ãƒ¼ãƒˆ/ãƒªã‚»ãƒƒãƒˆ) ---
        function createBoard() {
            // ãƒªã‚»ãƒƒãƒˆå‡¦ç†
            gameBoard.innerHTML = ''; // ãƒœãƒ¼ãƒ‰ã‚’ç©ºã«ã™ã‚‹
            resultDisplay.textContent = '';
            matchedPairs = 0;
            firstCard = null;
            secondCard = null;
            lockBoard = false;

            // â–¼ ã‚¿ã‚¤ãƒãƒ¼ãƒªã‚»ãƒƒãƒˆå‡¦ç† â–¼
            secondsElapsed = 0; // ç§’æ•°ã‚’0ã«
            timerDisplay.textContent = 'æ™‚é–“: 0ç§’'; // è¡¨ç¤ºã‚’0ã«
            
            // ã‚‚ã—æ—¢ã«ã‚¿ã‚¤ãƒãƒ¼ãŒå‹•ã„ã¦ã„ãŸã‚‰ã€åœæ­¢ã™ã‚‹
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            // â–¼ æ–°ã—ãã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹ â–¼
            startTimer(); 
            // â–² --- â–²

            // ã‚«ãƒ¼ãƒ‰ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            shuffle(cardArray);

            // ã‚«ãƒ¼ãƒ‰ã‚’HTMLã§ç”Ÿæˆ
            cardArray.forEach(cat => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.cat = cat;

                card.innerHTML = `
                    <span class="front">${cat}</span>
                    <span class="back">ğŸ¾</span>
                `;
                card.addEventListener('click', flipCard);
                gameBoard.appendChild(card);
            });
        }

        // --- â–¼ ã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹ãƒ»æ›´æ–°ã™ã‚‹é–¢æ•° (æ–°è¨­) â–¼ ---
        function startTimer() {
            // 1ç§’ã”ã¨ï¼ˆ1000ãƒŸãƒªç§’ï¼‰ã«å®Ÿè¡Œ
            timerInterval = setInterval(() => {
                secondsElapsed++; // ç§’æ•°ã‚’1å¢—ã‚„ã™
                timerDisplay.textContent = `æ™‚é–“: ${secondsElapsed}ç§’`; // è¡¨ç¤ºã‚’æ›´æ–°
            }, 1000);
        }
        // --- â–² -------------------------------- â–² ---

        // --- ã‚«ãƒ¼ãƒ‰ã‚’ã‚ãã‚‹å‡¦ç† ---
        function flipCard() {
            if (lockBoard || this.classList.contains('matched') || this === firstCard) {
                return;
            }
            this.classList.add('flipped');
            if (!firstCard) {
                firstCard = this;
            } else {
                secondCard = this;
                lockBoard = true;
                checkForMatch();
            }
        }

        // --- 2æšã®ã‚«ãƒ¼ãƒ‰ãŒãã‚ã£ãŸã‹ãƒã‚§ãƒƒã‚¯ ---
        function checkForMatch() {
            const isMatch = firstCard.dataset.cat === secondCard.dataset.cat;
            if (isMatch) {
                disableCards();
            } else {
                unflipCards();
            }
        }

        // --- å½“ãŸã‚Šã®å‡¦ç† ---
        function disableCards() {
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
            
            matchedPairs++;

            // â–¼ ã™ã¹ã¦ãã‚ã£ãŸã‚‰ã‚¯ãƒªã‚¢ â–¼
            if (matchedPairs === cats.length) {
                // ã‚¿ã‚¤ãƒãƒ¼åœæ­¢ï¼
                clearInterval(timerInterval); 
                
                setTimeout(() => {
                    // çµæœã«ã‚¿ã‚¤ãƒ ã‚’è¡¨ç¤º
                    resultDisplay.textContent = `ğŸ‰ ã‚¯ãƒªã‚¢ï¼ (${secondsElapsed}ç§’) ğŸ‰`;
                }, 500);
            }
            // â–² --- â–²
            
            resetBoard();
        }

        // --- ã¯ãšã‚Œã®å‡¦ç† ---
        function unflipCards() {
            setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetBoard();
            }, 1000);
        }

        // --- çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ ---
        function resetBoard() {
            firstCard = null;
            secondCard = null;
            lockBoard = false;
        }

        // --- ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã®å‡¦ç† ---
        resetButton.addEventListener('click', createBoard);

        // (ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã¯ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã‚‹ã¾ã§ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ãªã„)

    </script>

</body>
</html>