<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šæµ·</title>
    <style>
        body {
            background-color: #004d40; /* é›€å“ã®ã‚ˆã†ãªæ·±ã„ç·‘ */
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        h1 {
            margin: 10px 0;
            font-size: 24px;
            text-shadow: 2px 2px 4px black;
        }

        .controls {
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        button {
            padding: 8px 20px;
            font-size: 16px;
            cursor: pointer;
            background: #fff;
            border: none;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }
        button:active {
            transform: translateY(2px);
        }

        /* ã‚²ãƒ¼ãƒ ç›¤ã‚¨ãƒªã‚¢ */
        #game-container {
            position: relative;
            width: 960px; /* ç›¤é¢ã®åŸºæœ¬ã‚µã‚¤ã‚º */
            height: 640px;
            /* ç”»é¢ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦ç¸®å°ã™ã‚‹ãŸã‚ã®è¨­å®š */
            transform-origin: top center;
            margin-top: 10px;
        }

        /* éº»é›€ç‰Œã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .tile {
            position: absolute;
            width: 46px;  /* ç‰Œã®å¹… */
            height: 64px; /* ç‰Œã®é«˜ã• */
            background: linear-gradient(to bottom, #fff 85%, #e0e0e0 100%);
            border-radius: 6px;
            box-shadow: 
                3px 3px 0px #aaa,      /* ç‰Œã®å´é¢ï¼ˆåšã¿ï¼‰ */
                4px 4px 0px #888,      /* ç‰Œã®å´é¢ï¼ˆå½±ï¼‰ */
                6px 6px 5px rgba(0,0,0,0.5); /* å…¨ä½“ã®å½± */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 38px;
            cursor: pointer;
            transition: transform 0.1s, filter 0.2s;
            z-index: 1; /* åŸºæœ¬ */
            color: #333;
        }

        /* ç‰Œã®æ–‡å­—è‰²èª¿æ•´ */
        .tile[data-suit="man"] { color: #b30000; } /* è¬å­ */
        .tile[data-suit="pin"] { color: #0050b3; } /* ç­’å­ */
        .tile[data-suit="sou"] { color: #008000; } /* ç´¢å­ */
        .tile[data-suit="honor"] { color: #000; }  /* å­—ç‰Œï¼ˆä¸€éƒ¨èµ¤ã«ã™ã‚‹å‡¦ç†ã¯JSã§ï¼‰ */
        .tile[data-val="ğŸ€„"] { color: #d60000; } /* ä¸­ */
        .tile[data-val="ğŸ€…"] { color: #008000; } /* ç™º */

        /* é¸æŠã§ããªã„ç‰Œï¼ˆæš—ãã™ã‚‹ï¼‰ */
        .tile.blocked {
            filter: brightness(0.7);
            cursor: default;
        }

        /* é¸æŠä¸­ã®ç‰Œ */
        .tile.selected {
            transform: translate(-2px, -2px);
            box-shadow: 
                3px 3px 0px #ffeb3b,
                5px 5px 0px #fbc02d,
                8px 8px 8px rgba(0,0,0,0.6);
            border: 2px solid #ffeb3b;
            filter: brightness(1.1);
            z-index: 1000 !important; /* æœ€å‰é¢ã¸ */
        }

        /* ãƒ’ãƒ³ãƒˆè¡¨ç¤ºæ™‚ã®å¼·èª¿ */
        .tile.hint {
            animation: flash 1s infinite;
        }

        @keyframes flash {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.5) sepia(1) hue-rotate(-50deg); } /* é‡‘è‰²ã£ã½ãå…‰ã‚‹ */
            100% { filter: brightness(1); }
        }

        #message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.85);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 2000;
        }
    </style>
</head>
<body>

    <h1>SHANGHAI - JS</h1>
    
    <div class="controls">
        <span id="status">æ®‹ã‚Š: 144</span>
        <button onclick="initGame()">ãƒªã‚»ãƒƒãƒˆ</button>
        <button onclick="showHint()">ãƒ’ãƒ³ãƒˆ</button>
    </div>

    <div id="game-container">
        <!-- ç‰Œã¯ã“ã“ã«JavaScriptã§ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </div>

    <div id="message">
        <h2 id="msg-title">GAME CLEAR!</h2>
        <button onclick="initGame()">ã‚‚ã†ä¸€åº¦éŠã¶</button>
    </div>

<script>
    // --- è¨­å®šå®šæ•° ---
    const TILE_W = 50; // ã‚°ãƒªãƒƒãƒ‰ä¸Šã®å¹…ï¼ˆå®Ÿéš›ã®CSSå¹…ã¨ã¯å°‘ã—ç•°ãªã‚‹ï¼‰
    const TILE_H = 70; // ã‚°ãƒªãƒƒãƒ‰ä¸Šã®é«˜ã•
    
    // ç‰Œã®ç¨®é¡å®šç¾© (åˆè¨ˆ34ç¨® * 4æš = 136æš) 
    // â€»ç°¡å˜ã«ã™ã‚‹ãŸã‚èŠ±ç‰Œãƒ»å­£ç¯€ç‰Œã¯é™¤å¤–ã—ã¦ã€æ¨™æº–ç‰Œã®ã¿ã®136æšæ§‹æˆã«ã™ã‚‹ã‹ã€
    // ã‚ã‚‹ã„ã¯æ¨™æº–136 + ä½™ã‚Š8æšã®ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã‚’è¡Œã†ã€‚
    // ã“ã“ã§ã¯ã€æ¨™æº–çš„ãª34ç¨®Ã—4æšï¼136æš + äºˆå‚™ã¨ã—ã¦é©å½“ãªç‰Œã‚’é‡è¤‡ã•ã›ã¦è¨ˆ144æšã«ã—ã¾ã™ã€‚
    const TILES_DEF = [
        { type: 'man', chars: ['ğŸ€‡','ğŸ€ˆ','ğŸ€‰','ğŸ€Š','ğŸ€‹','ğŸ€Œ','ğŸ€','ğŸ€','ğŸ€'] }, // è¬å­ 1-9
        { type: 'pin', chars: ['ğŸ€™','ğŸ€š','ğŸ€›','ğŸ€œ','ğŸ€','ğŸ€','ğŸ€Ÿ','ğŸ€ ','ğŸ€¡'] }, // ç­’å­ 1-9
        { type: 'sou', chars: ['ğŸ€','ğŸ€‘','ğŸ€’','ğŸ€“','ğŸ€”','ğŸ€•','ğŸ€–','ğŸ€—','ğŸ€˜'] }, // ç´¢å­ 1-9
        { type: 'honor', chars: ['ğŸ€€','ğŸ€','ğŸ€‚','ğŸ€ƒ','ğŸ€†','ğŸ€…','ğŸ€„'] }        // æ±å—è¥¿åŒ—ç™½ç™¼ä¸­
    ];

    // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
    let tiles = []; // ç”Ÿæˆã•ã‚ŒãŸç‰Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—
    let selectedTile = null;
    let tilesLeft = 144;

    const container = document.getElementById('game-container');
    const statusText = document.getElementById('status');
    const messageBox = document.getElementById('message');

    // --- ãƒãƒƒãƒ—å®šç¾© (äº€ã®ç”²ç¾…é…åˆ—) ---
    // x, yã¯ã‚°ãƒªãƒƒãƒ‰åº§æ¨™(0.5å˜ä½ã‚‚è€ƒæ…®ã—ã¦æ•´æ•°ã§æ‰±ã†ã€‚1å˜ä½=ç‰Œã®åŠåˆ†ã®å¹…)ã€‚
    // å®Ÿéš›ã®æç”»ä½ç½®: left = x * (TILE_W/2), top = y * (TILE_H/2)
    // zã¯é‡ãªã‚Šé †ã€‚
    
    function getTurtleLayout() {
        const layout = [];
        // Layer 0 (Base): 12x8 ãƒ–ãƒ­ãƒƒã‚¯ (è§’ã‚’å‰Šã‚‹ãªã©ã®å½¢çŠ¶)
        // x: 2ã€œ26, y: 2ã€œ16 (å¶æ•°åº§æ¨™ä½¿ç”¨)
        // ä¸­å¤®æƒãˆã«ã™ã‚‹ãŸã‚é©å½“ã«ã‚ªãƒ•ã‚»ãƒƒãƒˆ
        // åŸºæœ¬ãƒ–ãƒ­ãƒƒã‚¯: 30æš
        for(let x=2; x<=24; x+=2) { // 12åˆ—
            for(let y=2; y<=14; y+=2) { // 7è¡Œ
                // å››éš…ã‚’å‰Šã‚‹ç°¡å˜ãªãƒ­ã‚¸ãƒƒã‚¯ (ä¸Šæµ·ã®å½¢çŠ¶ã«è¿‘ã¥ã‘ã‚‹)
                // å®Œå…¨ãªé•·æ–¹å½¢ã‹ã‚‰ã€ç‰¹å®šã®è§’ã‚’é™¤ã
                if((x===2 && (y===2 || y===14)) || (x===24 && (y===2 || y===14))) continue;
                
                // ä¸­å¤®ä»˜è¿‘ã®ç››ã‚Šä¸ŠãŒã‚Šç”¨ã«ä¸€éƒ¨ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã®ã¯Layerã®å½¹ç›®
                // ã“ã“ã§ã¯ãƒ™ãƒ¼ã‚¹ã‚’æ•·ã
                layout.push({x: x, y: y, z: 0});
            }
        }
        // ãƒ™ãƒ¼ã‚¹ã®å·¦å³ã«é£›ã³å‡ºãŸéƒ¨åˆ† (x=0, x=26, y=8ã‚ãŸã‚Š)
        layout.push({x: 0, y: 8, z: 0});
        layout.push({x: 26, y: 8, z: 0});
        layout.push({x: 28, y: 8, z: 0}); // å³ç«¯ã•ã‚‰ã«ã²ã¨ã¤

        // Layer 1: 6x6 (36æš)
        for(let x=8; x<=18; x+=2) {
            for(let y=4; y<=12; y+=2) {
                layout.push({x: x, y: y, z: 1});
            }
        }

        // Layer 2: 4x4 (16æš)
        for(let x=10; x<=16; x+=2) {
            for(let y=6; y<=10; y+=2) {
                layout.push({x: x, y: y, z: 2});
            }
        }

        // Layer 3: 2x2 (4æš)
        for(let x=12; x<=14; x+=2) {
            for(let y=7; y<=9; y+=2) { // å°‘ã—ä¸­å¤®å¯„ã›
               layout.push({x: x, y: y, z: 3});
            }
        }

        // Layer 4: Top (1æš)
        layout.push({x: 13, y: 8, z: 4});

        // â€»ä¸Šè¨˜ã®ãƒ­ã‚¸ãƒƒã‚¯ã ã¨æšæ•°ãŒ144ã«ã´ã£ãŸã‚Šåˆã‚ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€
        // 144æšã«ãªã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã¾ã™ã€‚
        // ç¾åœ¨ã®æ§‹æˆã§ãŠã‚ˆã144å‰å¾Œã«ãªã‚Šã¾ã™ãŒã€è¶³ã‚Šãªã„/å¤šã„å ´åˆã¯ã‚«ãƒƒãƒˆorè¿½åŠ ã—ã¾ã™ã€‚
        // ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ã«é…åˆ—ã‚’ã‚«ãƒƒãƒˆã—ã¦144æšã«ã—ã¾ã™ã€‚
        return layout.slice(0, 144);
    }
    
    // --- åˆæœŸåŒ– ---
    function initGame() {
        // ãƒªã‚»ãƒƒãƒˆ
        container.innerHTML = '';
        messageBox.style.display = 'none';
        selectedTile = null;
        tiles = [];
        
        // ç‰Œã‚»ãƒƒãƒˆç”Ÿæˆ
        // 144æšåˆ†ã®å€¤ã‚’ç”Ÿæˆï¼ˆãƒšã‚¢ã«ãªã‚‹ã‚ˆã†ã«ï¼‰
        let deck = [];
        let allChars = [];
        TILES_DEF.forEach(cat => {
            cat.chars.forEach(c => {
                allChars.push({char: c, type: cat.type});
            });
        });

        // 34ç¨® * 4 = 136æš
        for(let i=0; i<4; i++) {
            deck = deck.concat(allChars);
        }
        // è¶³ã‚Šãªã„8æšåˆ†ã‚’é©å½“ã«è¿½åŠ  (æ˜¥å¤ç§‹å†¬ã€æ¢…è˜­èŠç«¹ã®ä»£ã‚ã‚Šã«æ™®é€šã®ç‰Œã‚’è¿½åŠ )
        // ãƒ©ãƒ³ãƒ€ãƒ ã«8ãƒšã‚¢é¸ã‚“ã§è¿½åŠ 
        for(let i=0; i<4; i++) { // 4ãƒšã‚¢ = 8æš
            let r = Math.floor(Math.random() * allChars.length);
            deck.push(allChars[r]);
            deck.push(allChars[r]);
        }

        // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
        shuffleArray(deck);

        // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå–å¾—
        const layout = getTurtleLayout();

        // ç‰Œé…ç½®
        // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®æ•°ãŒ144ã¨ãšã‚Œã‚‹å ´åˆã®å®‰å…¨ç­–
        const limit = Math.min(layout.length, deck.length);
        tilesLeft = limit;
        statusText.innerText = `æ®‹ã‚Š: ${tilesLeft}`;

        for (let i = 0; i < limit; i++) {
            const pos = layout[i];
            const val = deck[i];
            
            const el = document.createElement('div');
            el.className = 'tile';
            el.innerText = val.char;
            el.dataset.val = val.char;
            el.dataset.suit = val.type;
            el.dataset.id = i;
            
            // ä½ç½®è¨­å®š (x1å˜ä½=25px, y1å˜ä½=35pxãã‚‰ã„)
            // x,yã¯2åˆ»ã¿ã®ã‚°ãƒªãƒƒãƒ‰ãªã®ã§ã€x/2 * 50px ã®ã‚ˆã†ã«ãªã‚‹
            const left = pos.x * (TILE_W / 2) + 20; // ä½™ç™½
            const top = pos.y * (TILE_H / 2) + 20;
            
            el.style.left = `${left}px`;
            el.style.top = `${top}px`;
            el.style.zIndex = 10 + pos.z; // z-indexè¨­å®š

            // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
            el.onclick = (e) => {
                e.stopPropagation();
                handleTileClick(i);
            };

            container.appendChild(el);

            tiles.push({
                id: i,
                x: pos.x,
                y: pos.y,
                z: pos.z,
                val: val.char,
                el: el,
                active: true
            });
        }
        
        // ç”»é¢ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
        resizeBoard();
        updateBlockedStatus();
    }

    // --- ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ ---

    // ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
    function handleTileClick(id) {
        const tile = tiles[id];
        if (!tile.active) return;
        if (isBlocked(tile)) return; // ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãŸã‚‰åå¿œã—ãªã„

        if (selectedTile) {
            if (selectedTile.id === tile.id) {
                // åŒã˜ç‰Œã‚’ã‚¯ãƒªãƒƒã‚¯ -> ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                deselect();
            } else {
                // é•ã†ç‰Œã‚’ã‚¯ãƒªãƒƒã‚¯ -> ãƒãƒƒãƒåˆ¤å®š
                if (tile.val === selectedTile.val) {
                    // ãƒãƒƒãƒæˆåŠŸ
                    removeTile(selectedTile);
                    removeTile(tile);
                    deselect();
                    checkWin();
                } else {
                    // ãƒãƒƒãƒå¤±æ•— -> é¸æŠåˆ‡ã‚Šæ›¿ãˆ
                    deselect();
                    select(tile);
                }
            }
        } else {
            // æ–°è¦é¸æŠ
            select(tile);
        }
    }

    function select(tile) {
        selectedTile = tile;
        tile.el.classList.add('selected');
    }

    function deselect() {
        if (selectedTile) {
            selectedTile.el.classList.remove('selected');
            selectedTile = null;
        }
    }

    function removeTile(tile) {
        tile.active = false;
        tile.el.style.display = 'none'; // DOMã‹ã‚‰ã¯æ¶ˆã•ãšéè¡¨ç¤ºã«
        tilesLeft--;
        statusText.innerText = `æ®‹ã‚Š: ${tilesLeft}`;
        
        // ç‰ŒãŒæ¶ˆãˆãŸã®ã§ã€ä»–ã®ç‰Œã®ãƒ­ãƒƒã‚¯çŠ¶æ…‹ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
        updateBlockedStatus();
    }

    // é‡è¦ï¼šç‰ŒãŒé¸æŠå¯èƒ½ã‹åˆ¤å®šã™ã‚‹
    function isBlocked(target) {
        // æ¡ä»¶1: ä¸Šã«ç‰ŒãŒã‚ã‚‹ã‹ (z + 1 ã§ã€åº§æ¨™ãŒé‡ãªã£ã¦ã„ã‚‹)
        // æ¡ä»¶2: å·¦å³ä¸¡æ–¹ã«ç‰ŒãŒã‚ã‚‹ã‹ (zãŒåŒã˜ã§ã€xãŒéš£æ¥)
        
        let blockedByTop = false;
        let blockedByLeft = false;
        let blockedByRight = false;

        // ç‰Œã®ã‚µã‚¤ã‚ºã¯ã‚°ãƒªãƒƒãƒ‰ä¸Šã§ width:2, height:2 ã¨ã¿ãªã™
        const tL = target.x;
        const tR = target.x + 2;
        const tT = target.y;
        const tB = target.y + 2;

        for (let other of tiles) {
            if (!other.active || other.id === target.id) continue;

            // ä¸Šã«ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            if (other.z === target.z + 1) {
                // çŸ©å½¢ã®é‡ãªã‚Šåˆ¤å®š
                // otherã®ç¯„å›²
                const oL = other.x;
                const oR = other.x + 2;
                const oT = other.y;
                const oB = other.y + 2;

                // é‡ãªã‚Šåˆ¤å®š: !(Left > Right || Right < Left || Top > Bottom || Bottom < Top)
                if (tL < oR && tR > oL && tT < oB && tB > oT) {
                    blockedByTop = true;
                }
            }

            // å·¦å³ãƒã‚§ãƒƒã‚¯ (åŒã˜é«˜ã•)
            if (other.z === target.z) {
                // Yè»¸ã®é‡ãªã‚ŠãŒã‚ã‚‹ã‹ (yãŒè¿‘ã„ã‹)
                // ç¸¦æ–¹å‘ã®ã‚ºãƒ¬ãŒ2æœªæº€ãªã‚‰éš£æ¥ã¨ã¿ãªã™
                if (Math.abs(other.y - target.y) < 2) {
                    // å·¦éš£: otherã®å³ç«¯(x+2) ãŒ targetã®å·¦ç«¯(x) ã«æ¥ã™ã‚‹ã‹é£Ÿã„è¾¼ã‚€
                    // å³å¯†ã«ã¯ Shanghai ã¯ xåº§æ¨™ã®å·®ãŒ2ä»¥å†…ã§åˆ¤å®š
                    if (other.x === target.x - 2) blockedByLeft = true;
                    // å³éš£
                    if (other.x === target.x + 2) blockedByRight = true;
                }
            }
        }

        // ä¸Šã«ä¹—ã‚‰ã‚Œã¦ã„ã‚‹ã€ã¾ãŸã¯ (å·¦ãŒå¡ãŒã£ã¦ã„ã‚‹ ã‹ã¤ å³ãŒå¡ãŒã£ã¦ã„ã‚‹)
        // â€»ä¸Šæµ·ã®ãƒ«ãƒ¼ãƒ«ï¼šå·¦å³ã€Œã©ã¡ã‚‰ã‹ã€ãŒç©ºã„ã¦ã„ã‚Œã°OKã€‚
        // ã¤ã¾ã‚Šã€å·¦å³ã€Œä¸¡æ–¹ã€å¡ãŒã£ã¦ã„ã‚‹ã¨NGã€‚
        return blockedByTop || (blockedByLeft && blockedByRight);
    }

    // å…¨ç‰Œã®çŠ¶æ…‹æ›´æ–°ï¼ˆè¦‹ãŸç›®ã®ãŸã‚ï¼‰
    function updateBlockedStatus() {
        tiles.forEach(t => {
            if (!t.active) return;
            if (isBlocked(t)) {
                t.el.classList.add('blocked');
            } else {
                t.el.classList.remove('blocked');
            }
        });
    }

    // ãƒ’ãƒ³ãƒˆæ©Ÿèƒ½
    function showHint() {
        // é¸æŠå¯èƒ½ãªç‰Œã®ãƒšã‚¢ã‚’æ¢ã™
        // ã¾ãšãƒ•ãƒªãƒ¼ãªç‰Œã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
        const freeTiles = tiles.filter(t => t.active && !isBlocked(t));
        
        // ãƒšã‚¢æ¢ç´¢
        for (let i = 0; i < freeTiles.length; i++) {
            for (let j = i + 1; j < freeTiles.length; j++) {
                if (freeTiles[i].val === freeTiles[j].val) {
                    // è¦‹ã¤ã‹ã£ãŸ
                    flashTile(freeTiles[i]);
                    flashTile(freeTiles[j]);
                    return;
                }
            }
        }
        alert("æ¶ˆã›ã‚‹ç‰ŒãŒã‚ã‚Šã¾ã›ã‚“ï¼æ‰‹è©°ã¾ã‚Šã§ã™ã€‚ãƒªã‚»ãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚");
    }

    function flashTile(tile) {
        tile.el.classList.add('hint');
        setTimeout(() => tile.el.classList.remove('hint'), 2000);
    }

    function checkWin() {
        if (tilesLeft === 0) {
            document.getElementById('msg-title').innerText = "GAME CLEAR!";
            messageBox.style.display = 'block';
        }
    }

    // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function resizeBoard() {
        // ç”»é¢å¹…ã«åˆã‚ã›ã¦ç›¤é¢ã‚’ç¸®å°
        const scale = Math.min(1, (window.innerWidth - 20) / 960);
        container.style.transform = `scale(${scale})`;
    }

    window.addEventListener('resize', resizeBoard);

    // é–‹å§‹
    initGame();

</script>
</body>
</html>